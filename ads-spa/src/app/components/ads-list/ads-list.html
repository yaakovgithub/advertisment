<div class="search-bar">
  <input
    [(ngModel)]="q"
    type="text"
    placeholder="Type address or a place nearby in any language"
    (keyup.enter)="search()"
  />
  <select [(ngModel)]="category">
    <option value="">All categories</option>
    <option>Buy & Sell</option>
    <option>Rent</option>
    <option>Events</option>
    <option>Travel</option>
  </select>
  <input type="number" [(ngModel)]="minPrice" placeholder="Min $" />
  <input type="number" [(ngModel)]="maxPrice" placeholder="Max $" />
  <button (click)="search()">Go</button>
  <button (click)="toggleNearMe()">{{ nearMe ? 'Clear location' : 'Near me' }}</button>
  <button (click)="openAdForm()">+ New Ad</button>
</div>

<div *ngIf="nearMe" id="nearme-map" style="height: 260px; border-radius: 8px; margin: 8px 0"></div>

<div class="posts-grid">
  <div
    *ngFor="let a of ads"
    class="post-card"
    [ngClass]="{
      'buy-sell': a.category === 'Buy & Sell',
      rent: a.category === 'Rent',
      event: a.category === 'Events',
      travel: a.category === 'Travel'
    }"
  >
    <div class="category">{{ a.category }}</div>
    <div class="title">{{ a.title }}</div>
    <img *ngIf="a.imageUrl" [src]="a.imageUrl" alt="" class="thumbnail" />
    <div class="description">{{ a.description }}</div>
    <div class="price" *ngIf="a.price !== undefined">Price: ${{ a.price }}</div>
    <div class="actions">
      <button (click)="openAdForm(a.id)" style="margin-right: 8px">Edit</button>
      <!-- <button (click)="edit(a)">Edit</button> -->
      <button (click)="remove(a)">Delete</button>
    </div>
  </div>
</div>
